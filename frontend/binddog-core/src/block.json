{
  "openapi": "3.0.1",
  "info": {
    "title": "Member API",
    "description": "Member API Documentation",
    "version": "1.0"
  },
  "servers": [
    {
      "url": "/api",
      "description": "Default Server URL"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/members/users": {
      "get": {
        "tags": ["user-info-controller"],
        "summary": "유저 정보 조회",
        "description": "유저의 정보를 조회합니다.",
        "operationId": "getUserInfo",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseUserInfoRes"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["user-info-controller"],
        "summary": "유저 정보 수정",
        "description": "유저의 정보(닉네임)를 수정합니다.",
        "operationId": "modifyUserInfo",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserInfoChangeReq"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseNoneResponse"
                }
              }
            }
          }
        }
      }
    },
    "/members/users/sign-up": {
      "post": {
        "tags": ["user-controller"],
        "summary": "유저 회원가입",
        "description": "유저 정보를 받아 회원가입 합니다.",
        "operationId": "registerUser",
        "requestBody": {
          "description": "회원(유저) 정보",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegisterReq"
              },
              "example": {
                "name": "홍길동",
                "password": "Password123!",
                "phoneNumber": "01011112222",
                "nickname": "홍길동의 별명",
                "birthdate": "20080808",
                "pin": "001122"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseNoneResponse"
                }
              }
            }
          }
        }
      }
    },
    "/members/users/promote": {
      "post": {
        "tags": ["user-controller"],
        "summary": "회원 권한 조정(내부 서버용)",
        "description": "임시 회원을 일반 회원으로 권한을 조정합니다.",
        "operationId": "promoteUser",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseNoneResponse"
                }
              }
            }
          }
        }
      }
    },
    "/members/users/pin": {
      "post": {
        "tags": ["user-info-controller"],
        "summary": "간편 결제 비밀번호 변경",
        "description": "간편 결제 비밀번호를 변경합니다.",
        "operationId": "changeUserPin",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserPinChangeReq"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseNoneResponse"
                }
              }
            }
          }
        }
      }
    },
    "/members/users/pin-check": {
      "post": {
        "tags": ["user-info-controller"],
        "summary": "유저 간편 결제 비밀번호 검증",
        "description": "결제 이전, 간편 결제 비밀번호를 입력받아 일치하는지 확인합니다. 3회 이상 틀리면 재설정 해야합니다.",
        "operationId": "checkUserPin",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserPinCheckReq"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseUserKeyRes"
                }
              }
            }
          }
        }
      }
    },
    "/members/users/password-check": {
      "post": {
        "tags": ["user-info-controller"],
        "summary": "유저 비밀번호 검증",
        "description": "유저 정보 변경 이전, 비밀번호를 입력받아 일치하는지 확인합니다.",
        "operationId": "checkUserPassword",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserPasswordCheckReq"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseUserPasswordCheckRes"
                }
              }
            }
          }
        }
      }
    },
    "/members/users/password-change": {
      "post": {
        "tags": ["user-info-controller"],
        "summary": "유저 비밀번호 변경",
        "description": "유저의 비밀번호를 변경합니다.",
        "operationId": "changeUserPassword",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserPasswordChangeReq"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseNoneResponse"
                }
              }
            }
          }
        }
      }
    },
    "/members/users/nickname": {
      "post": {
        "tags": ["user-info-controller"],
        "summary": "유저 닉네임 목록 조회(내부 서버용)",
        "description": "유저의 닉네임 목록을 조회합니다.",
        "operationId": "getUserNicknames",
        "requestBody": {
          "description": "회원(유저) 정보",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserNicknamesReq"
              },
              "example": {
                "memberIds": [9, 10, 20]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseUserNicknamesRes"
                }
              }
            }
          }
        }
      }
    },
    "/members/owners/sign-up": {
      "post": {
        "tags": ["owner-controller"],
        "summary": "가맹점주 회원가입",
        "description": "가맹점 및 가맹점주 정보를 받아 회원가입 합니다.",
        "operationId": "registerOwner",
        "requestBody": {
          "description": "가맹점주 및 가맹점 정보",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OwnerRegisterReq"
              },
              "example": {
                "name": "홍길동",
                "password": "Password123!",
                "phoneNumber": "01011112222",
                "registrationNumber": "6663248810",
                "franchiseName": "가맹점 이름",
                "category": "KOREAN",
                "telephoneNumber": "0827658295",
                "address": "주소",
                "latitude": 45,
                "longitude": 135,
                "rrnPrefix": "890830",
                "rrnCheckDigit": 1
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseNoneResponse"
                }
              }
            }
          }
        }
      }
    },
    "/members/users/user-key": {
      "get": {
        "tags": ["user-controller"],
        "summary": "금융망 API UserKey 조회",
        "description": "금융망 API의 UserKey를 반환합니다.",
        "operationId": "getUserKey",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseUserKeyRes"
                }
              }
            }
          }
        }
      }
    },
    "/members/role": {
      "get": {
        "tags": ["member-controller"],
        "summary": "회원 권한 체크(내부 서버용)",
        "description": "회원 ID를 받아 권한을 확인합니다.",
        "operationId": "getMemberRole",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseMemberRoleRes"
                }
              }
            }
          }
        }
      }
    },
    "/members/duplicates/phone": {
      "get": {
        "tags": ["member-controller"],
        "summary": "전화번호 중복 체크(내부 서버용)",
        "description": "전화번호를 받아 중복을 체크합니다.",
        "operationId": "checkPhoneNumberDuplicate",
        "parameters": [
          {
            "name": "phoneNumber",
            "in": "query",
            "required": true,
            "schema": {
              "maxLength": 11,
              "minLength": 11,
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseDuplicateRes"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "UserInfoChangeReq": {
        "type": "object",
        "properties": {
          "nickname": {
            "maxLength": 30,
            "minLength": 2,
            "type": "string"
          }
        }
      },
      "ResponseNoneResponse": {
        "type": "object",
        "properties": {
          "resultCode": {
            "type": "string"
          },
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "string",
            "enum": ["NONE"]
          }
        }
      },
      "MemberRegisterReq": {
        "type": "object",
        "properties": {
          "name": {
            "maxLength": 30,
            "minLength": 2,
            "type": "string"
          },
          "password": {
            "pattern": "^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,16}$",
            "type": "string"
          },
          "phoneNumber": {
            "pattern": "^\\d{11}$",
            "type": "string"
          }
        }
      },
      "UserRegisterReq": {
        "type": "object",
        "properties": {
          "nickname": {
            "maxLength": 30,
            "minLength": 2,
            "type": "string"
          },
          "birthdate": {
            "type": "string"
          },
          "pin": {
            "pattern": "^\\d{6}$",
            "type": "string"
          },
          "memberRegisterReq": {
            "$ref": "#/components/schemas/MemberRegisterReq"
          }
        }
      },
      "UserPinChangeReq": {
        "type": "object",
        "properties": {
          "pin": {
            "pattern": "^\\d{6}$",
            "type": "string"
          }
        }
      },
      "UserPinCheckReq": {
        "type": "object",
        "properties": {
          "pin": {
            "pattern": "^\\d{6}$",
            "type": "string"
          }
        }
      },
      "ResponseUserKeyRes": {
        "type": "object",
        "properties": {
          "resultCode": {
            "type": "string"
          },
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/UserKeyRes"
          }
        }
      },
      "UserKeyRes": {
        "type": "object",
        "properties": {
          "userKey": {
            "type": "string"
          }
        }
      },
      "UserPasswordCheckReq": {
        "type": "object",
        "properties": {
          "password": {
            "pattern": "^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,16}$",
            "type": "string",
            "example": "Password123!"
          }
        }
      },
      "ResponseUserPasswordCheckRes": {
        "type": "object",
        "properties": {
          "resultCode": {
            "type": "string"
          },
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/UserPasswordCheckRes"
          }
        }
      },
      "UserPasswordCheckRes": {
        "type": "object",
        "properties": {
          "isCorrect": {
            "type": "boolean"
          }
        }
      },
      "UserPasswordChangeReq": {
        "type": "object",
        "properties": {
          "password": {
            "pattern": "^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,16}$",
            "type": "string",
            "example": "Password123!"
          }
        }
      },
      "UserNicknamesReq": {
        "type": "object",
        "properties": {
          "memberIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int64"
            }
          }
        }
      },
      "ResponseUserNicknamesRes": {
        "type": "object",
        "properties": {
          "resultCode": {
            "type": "string"
          },
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/UserNicknamesRes"
          }
        }
      },
      "UserNicknameRes": {
        "type": "object",
        "properties": {
          "memberId": {
            "type": "integer",
            "format": "int64"
          },
          "nickname": {
            "type": "string"
          }
        }
      },
      "UserNicknamesRes": {
        "type": "object",
        "properties": {
          "members": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserNicknameRes"
            }
          }
        }
      }
    }
  }
}
